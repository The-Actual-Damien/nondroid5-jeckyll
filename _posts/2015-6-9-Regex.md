---
layout: post
title: 正規表現に関して
---

正規表現で実装する際に、重要なことをあらかじめ記述しておく。

正規表現の記述方法に関する例

<table>
<tr><th>分類</th><th>どこでA/Bしたいか？</th><th>正規表現</th><th>マッチするURL例</th><th>マッチしないURL例</th></tr>
<tr><td>基本</td><td>トップサイト</td><td>^http://exapmle.com(\?.+)?$</td><td>http://exapmle.com<br/>http://exapmle.com?x=1</br/>http://exapmle.com?x=1&y=2</td><td>http://exapmle.com/bar<br/>http://exapmle.com/bar?x=1</td></tr>
<tr><td></td><td>パス配下の全ページ</td><td>^http://exapmle.com/bar/</td><td>http://exapmle.com/bar/<br/>http://exapmle.com/bar/buz<br/>http://exapmle.com/bar/?x=1<br/>http://exapmle.com/bar/?x=1&y=2<br/>http://exapmle.com/bar/buz?x=1</td><td>http://exapmle.com<br/>http://exapmle.com?x=1<br/>http://exapmle.com/wee/</td></tr>
<tr><td></td><td>http と httpsどちらも同じコンテンツを返すページ</td><td>^http(\|s)://exapmle.com/(\?.+)?$</td><td>http://exapmle.com/<br/>https://exapmle.com/<br/>http://exapmle.com/?x=1<br/>https://exapmle.com/?x=1</td><td>http://exapmle.com/bar<br/>https://exapmle.com/bar?x=1</td></tr>
<tr><td></td><td>www. がつくorつかない,どちらも同じコンテンツを返すページ</td><td>^http://(www\.)?exapmle.com/(\?.+)?$</td><td>http://exapmle.com/<br/>http://exapmle.com/?x=1<br/>http://www.exapmle.com/<br/>http://www.exapmle.com/?x=1</td><td>http://dashboard.exapmle.com/<br/>http://exapmle.com/bar<br/>http://exapmle.com/bar?x=1<br/>http://www.exapmle.com/bar</td></tr>
<tr><td></td><td>/ と index.htmlどちらも対応</td><td>^http://exapmle.com/(index\.html)?(\?.+)?$</td><td>http://exapmle.com/<br/>http://exapmle.com/?x=1<br/>http://exapmle.com/index.html<br/>http://exapmle.com/index.html?x=1</td><td>http://exapmle.com/bar<br/>http://exapmle.com/bar.html<br/>http://exapmle.com/bar/index.html</td></tr>
<tr><td>複数ページ</td><td>指定した幾つかのパスのみ</td><td>^http://exapmle.com/(abc|def|ghi)/(\?.+)?$</td><td>http://exapmle.com/abc/<br/>http://exapmle.com/def/<br/>http://exapmle.com/ghi/<br/>http://exapmle.com/abc/?x=1&y=2</td><td>http://exapmle.com/jkl/<br/>http://exapmle.com/abc/123</td></tr>
<tr><td></td><td>ブログのエントリページやECサイトの商品ページなどパスに一定ルールが存在するもの</td><td>^http://exapmle.com/item/\d+(\?.+)?$</td><td>http://exapmle.com/item/123<br/>http://exapmle.com/item/456<br/>http://exapmle.com/item/789<br/>http://exapmle.com/item/123?x=1</td><td>http://exapmle.com/<br/>http://exapmle.com/bar/<br/>http://exapmle.com/item/123/cart<br/>http://exapmle.com/item/abc</td></tr>
<tr><td>GET パラメータ指定</td><td>指定するGETパラメータが含まれていた場合のみ</td><td>^http://exapmle.com/\?<ad_code=123></td><td>http://exapmle.com/?ad_code=123<br/>http://exapmle.com/?ad_code=123&x=1<br/>http://exapmle.com/?x=1&ad_code=123</td><td>http://exapmle.com/<br/>http://exapmle.com/?ad_code=456<br/>http://exapmle.com/bar?ad_code=123</td></tr>
<tr><td></td><td>指定する複数のGETパラメータが含まれていた場合のみ</td><td>^http://exapmle.com/\?<ad_code=123>&<from=.+?></td><td>http://exapmle.com/?ad_code=123&from=1<br/>http://exapmle.com/?ad_code=123&from=2<br/>http://exapmle.com/?ad_code=123&from=2&x=1<br/>http://exapmle.com/?from=1&x=1&ad_code=123</td><td>http://exapmle.com/?ad_code=456&from=1<br/>http://exapmle.com/?from=2<br/>http://exapmle.com/?ad_code=123</td></tr>
</table>

参考サイト
[正規表現でのURLの設定](https://kaizenplatform.zendesk.com/hc/ja/articles/203649767-%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE%E3%81%A7%E3%81%AEURL%E3%81%AE%E8%A8%AD%E5%AE%9A)
